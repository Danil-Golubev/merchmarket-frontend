{"ast":null,"code":"import styles from'./Item.module.scss';import{useParams}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import{fetchGetOne}from\"../../redux/slices/items\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const cartFromLocalStorage=JSON.parse(localStorage.getItem('cart')||'[]');export const Product=()=>{var _items$sizes,_items$additionalImag;const dispatch=useDispatch();const[items,setItems]=React.useState('');const[selectedSize,setSelectedSize]=React.useState(null);const[cart,setCart]=React.useState(cartFromLocalStorage);function addToCart(){let item={_id:items._id,title:items.title,selectedSize:selectedSize,price:items.price,imageUrl:items.imageUrl,count:1};const targetid=item._id;const targetSize=item.selectedSize;const targetItem=cart.find(obj=>obj._id===targetid&&obj.selectedSize===targetSize);if(targetItem!=undefined){cart[cart.indexOf(targetItem)].count+=1;console.log('найден похожий элемент');}else{cartFromLocalStorage.push(item);}setCart(cartFromLocalStorage);localStorage.setItem('cart',JSON.stringify(cartFromLocalStorage));const cartChangeEvent=new Event('cartChange');window.dispatchEvent(cartChangeEvent);}const{id}=useParams();React.useEffect(()=>{dispatch(fetchGetOne(id)).then(res=>{setItems(res.payload);}).catch(err=>{console.warn(err.message);alert(\"redux items error\");});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.bighalfblock,children:/*#__PURE__*/_jsx(\"img\",{className:styles.image,src:\"\".concat(items.imageUrl)})}),/*#__PURE__*/_jsx(\"div\",{className:styles.bighalfblockinfo,children:/*#__PURE__*/_jsx(\"div\",{className:styles.infocontainer,children:/*#__PURE__*/_jsx(\"div\",{className:styles.contentcontainer,children:/*#__PURE__*/_jsxs(\"ul\",{className:styles.defaultul,children:[/*#__PURE__*/_jsxs(\"li\",{className:styles.defaultli,children:[\" \",/*#__PURE__*/_jsx(\"div\",{children:items.title})]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.defaultli,children:[\"  \",/*#__PURE__*/_jsx(\"div\",{children:items.description})]}),/*#__PURE__*/_jsxs(\"li\",{className:styles.defaultli,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:styles.sizeContainer,children:(_items$sizes=items.sizes)===null||_items$sizes===void 0?void 0:_items$sizes.map(item=>item.count>0?/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.sizeBlock,\" \").concat(selectedSize===item.sizeName?styles.selected:''),onClick:()=>setSelectedSize(item.sizeName),children:item.sizeName}):/*#__PURE__*/_jsx(\"div\",{className:styles.sizeBlockSold,children:item.sizeName}))})]}),/*#__PURE__*/_jsx(\"li\",{className:styles.defaultli,children:selectedSize!=null||items.type==\"other\"?/*#__PURE__*/_jsx(\"div\",{onClick:()=>addToCart(),className:styles.buttonOrder,children:\"Add to cart\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:styles.buttonOrder,children:\"Add to cart\"})})})]})})})})]}),(_items$additionalImag=items.additionalImages)===null||_items$additionalImag===void 0?void 0:_items$additionalImag.map(item=>/*#__PURE__*/_jsx(\"div\",{className:styles.additionalImageDiv,children:/*#__PURE__*/_jsx(\"img\",{className:styles.additionalImage,src:\"\".concat(item)})}))]});};","map":{"version":3,"names":["styles","useParams","useDispatch","useSelector","fetchGetOne","React","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","cartFromLocalStorage","JSON","parse","localStorage","getItem","Product","_items$sizes","_items$additionalImag","dispatch","items","setItems","useState","selectedSize","setSelectedSize","cart","setCart","addToCart","item","_id","title","price","imageUrl","count","targetid","targetSize","targetItem","find","obj","undefined","indexOf","console","log","push","setItem","stringify","cartChangeEvent","Event","window","dispatchEvent","id","useEffect","then","res","payload","catch","err","warn","message","alert","children","className","container","bighalfblock","image","src","concat","bighalfblockinfo","infocontainer","contentcontainer","defaultul","defaultli","description","sizeContainer","sizes","map","sizeBlock","sizeName","selected","onClick","sizeBlockSold","type","buttonOrder","additionalImages","additionalImageDiv","additionalImage"],"sources":["/Users/yyysl/Downloads/yung-market/test1/frontend/src/pages/Product/index.jsx"],"sourcesContent":["import styles from './Item.module.scss';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {fetchGetOne} from \"../../redux/slices/items\"\nimport React from \"react\";\n\nconst cartFromLocalStorage = JSON.parse(localStorage.getItem('cart') || '[]')\n\n\nexport const Product = () =>{\n    const dispatch = useDispatch()\n    const [items, setItems] = React.useState('');\n    const [selectedSize, setSelectedSize] = React.useState(null);\n    const [cart, setCart] = React.useState(cartFromLocalStorage);\n \n    function addToCart(){\n        let item = {\n            _id:items._id,\n            title:items.title,\n            selectedSize:selectedSize,\n            price:items.price,\n            imageUrl:items.imageUrl,\n            count:1\n        }\n        const targetid = item._id\n        const targetSize = item.selectedSize\n        const targetItem = cart.find(obj=>obj._id === targetid && obj.selectedSize === targetSize)\n        if(targetItem != undefined) {\n            cart[cart.indexOf(targetItem)].count+=1;\n            console.log('найден похожий элемент')\n        }\n        else{\n        cartFromLocalStorage.push(item)\n        }\n        setCart(cartFromLocalStorage)\n        localStorage.setItem('cart', JSON.stringify(cartFromLocalStorage))\n        const cartChangeEvent = new Event('cartChange')\n        window.dispatchEvent(cartChangeEvent)\n      \n    }\n\n\n  \n    const {id} = useParams();\n    React.useEffect(()=>{\n        dispatch(fetchGetOne(id))\n        .then(res=>{\n            setItems(res.payload)\n           \n        })\n        .catch((err)=>{\n           console.warn(err.message)\n           alert(\"redux items error\")\n        })\n     }, [])\n   \n    return(\n        <>\n        <div className={styles.container}>\n        <div className={styles.bighalfblock}>\n        <img className= {styles.image} src= {`${items.imageUrl}`}/>\n        </div>\n        <div className={styles.bighalfblockinfo}> \n        <div className={styles.infocontainer}> \n        <div className={styles.contentcontainer}> \n        <ul className={styles.defaultul}>\n       <li className={styles.defaultli}> <div>{items.title}</div></li>\n       <li className={styles.defaultli}>  <div>{items.description}</div></li>\n       <li className={styles.defaultli}> <div className={styles.sizeContainer}> \n       {items.sizes?.map((item)=>\n       item.count > 0 ?(\n        <div className={`${styles.sizeBlock} ${selectedSize === item.sizeName ? styles.selected : ''}`} onClick={() => setSelectedSize(item.sizeName)}>{item.sizeName}</div>\n        ):\n        ( <div className={styles.sizeBlockSold}>\n            {item.sizeName}\n            </div>)\n       )}\n       </div></li>\n       \n       <li className={styles.defaultli}>\n{(selectedSize != null) || (items.type == \"other\") ?(\n<div onClick={()=>addToCart()}className={styles.buttonOrder}>Add to cart</div>\n):(\n<>\n<div className={styles.buttonOrder}>Add to cart</div>\n</>\n)}\n        </li>\n       </ul>\n        \n        </div>\n  \n        </div>\n        </div>\n        </div>\n        {items.additionalImages?.map((item)=>\n        <div className = {styles.additionalImageDiv}>\n        <img className = {styles.additionalImage}src = {`${item}`}/></div>\n       )}\n        \n        </>\n    )\n\n\n}"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,oBAAoB,CACvC,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAAQC,WAAW,KAAO,0BAA0B,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,oBAAoB,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAI,IAAI,CAAC,CAG7E,MAAO,MAAM,CAAAC,OAAO,CAAGA,CAAA,GAAK,KAAAC,YAAA,CAAAC,qBAAA,CACxB,KAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,KAAK,CAACkB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGpB,KAAK,CAACkB,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGtB,KAAK,CAACkB,QAAQ,CAACX,oBAAoB,CAAC,CAE5D,QAAS,CAAAgB,SAASA,CAAA,CAAE,CAChB,GAAI,CAAAC,IAAI,CAAG,CACPC,GAAG,CAACT,KAAK,CAACS,GAAG,CACbC,KAAK,CAACV,KAAK,CAACU,KAAK,CACjBP,YAAY,CAACA,YAAY,CACzBQ,KAAK,CAACX,KAAK,CAACW,KAAK,CACjBC,QAAQ,CAACZ,KAAK,CAACY,QAAQ,CACvBC,KAAK,CAAC,CACV,CAAC,CACD,KAAM,CAAAC,QAAQ,CAAGN,IAAI,CAACC,GAAG,CACzB,KAAM,CAAAM,UAAU,CAAGP,IAAI,CAACL,YAAY,CACpC,KAAM,CAAAa,UAAU,CAAGX,IAAI,CAACY,IAAI,CAACC,GAAG,EAAEA,GAAG,CAACT,GAAG,GAAKK,QAAQ,EAAII,GAAG,CAACf,YAAY,GAAKY,UAAU,CAAC,CAC1F,GAAGC,UAAU,EAAIG,SAAS,CAAE,CACxBd,IAAI,CAACA,IAAI,CAACe,OAAO,CAACJ,UAAU,CAAC,CAAC,CAACH,KAAK,EAAE,CAAC,CACvCQ,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACzC,CAAC,IACG,CACJ/B,oBAAoB,CAACgC,IAAI,CAACf,IAAI,CAAC,CAC/B,CACAF,OAAO,CAACf,oBAAoB,CAAC,CAC7BG,YAAY,CAAC8B,OAAO,CAAC,MAAM,CAAEhC,IAAI,CAACiC,SAAS,CAAClC,oBAAoB,CAAC,CAAC,CAClE,KAAM,CAAAmC,eAAe,CAAG,GAAI,CAAAC,KAAK,CAAC,YAAY,CAAC,CAC/CC,MAAM,CAACC,aAAa,CAACH,eAAe,CAAC,CAEzC,CAIA,KAAM,CAACI,EAAE,CAAC,CAAGlD,SAAS,CAAC,CAAC,CACxBI,KAAK,CAAC+C,SAAS,CAAC,IAAI,CAChBhC,QAAQ,CAAChB,WAAW,CAAC+C,EAAE,CAAC,CAAC,CACxBE,IAAI,CAACC,GAAG,EAAE,CACPhC,QAAQ,CAACgC,GAAG,CAACC,OAAO,CAAC,CAEzB,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAG,CACXf,OAAO,CAACgB,IAAI,CAACD,GAAG,CAACE,OAAO,CAAC,CACzBC,KAAK,CAAC,mBAAmB,CAAC,CAC7B,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEP,mBACInD,KAAA,CAAAE,SAAA,EAAAkD,QAAA,eACApD,KAAA,QAAKqD,SAAS,CAAE9D,MAAM,CAAC+D,SAAU,CAAAF,QAAA,eACjCtD,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACgE,YAAa,CAAAH,QAAA,cACpCtD,IAAA,QAAKuD,SAAS,CAAG9D,MAAM,CAACiE,KAAM,CAACC,GAAG,IAAAC,MAAA,CAAM9C,KAAK,CAACY,QAAQ,CAAG,CAAC,CAAC,CACtD,CAAC,cACN1B,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACoE,gBAAiB,CAAAP,QAAA,cACxCtD,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACqE,aAAc,CAAAR,QAAA,cACrCtD,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACsE,gBAAiB,CAAAT,QAAA,cACxCpD,KAAA,OAAIqD,SAAS,CAAE9D,MAAM,CAACuE,SAAU,CAAAV,QAAA,eACjCpD,KAAA,OAAIqD,SAAS,CAAE9D,MAAM,CAACwE,SAAU,CAAAX,QAAA,EAAC,GAAC,cAAAtD,IAAA,QAAAsD,QAAA,CAAMxC,KAAK,CAACU,KAAK,CAAM,CAAC,EAAI,CAAC,cAC/DtB,KAAA,OAAIqD,SAAS,CAAE9D,MAAM,CAACwE,SAAU,CAAAX,QAAA,EAAC,IAAE,cAAAtD,IAAA,QAAAsD,QAAA,CAAMxC,KAAK,CAACoD,WAAW,CAAM,CAAC,EAAI,CAAC,cACtEhE,KAAA,OAAIqD,SAAS,CAAE9D,MAAM,CAACwE,SAAU,CAAAX,QAAA,EAAC,GAAC,cAAAtD,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAAC0E,aAAc,CAAAb,QAAA,EAAA3C,YAAA,CACtEG,KAAK,CAACsD,KAAK,UAAAzD,YAAA,iBAAXA,YAAA,CAAa0D,GAAG,CAAE/C,IAAI,EACvBA,IAAI,CAACK,KAAK,CAAG,CAAC,cACb3B,IAAA,QAAKuD,SAAS,IAAAK,MAAA,CAAKnE,MAAM,CAAC6E,SAAS,MAAAV,MAAA,CAAI3C,YAAY,GAAKK,IAAI,CAACiD,QAAQ,CAAG9E,MAAM,CAAC+E,QAAQ,CAAG,EAAE,CAAG,CAACC,OAAO,CAAEA,CAAA,GAAMvD,eAAe,CAACI,IAAI,CAACiD,QAAQ,CAAE,CAAAjB,QAAA,CAAEhC,IAAI,CAACiD,QAAQ,CAAM,CAAC,cAElKvE,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACiF,aAAc,CAAApB,QAAA,CAClChC,IAAI,CAACiD,QAAQ,CACT,CACV,CAAC,CACI,CAAC,EAAI,CAAC,cAEXvE,IAAA,OAAIuD,SAAS,CAAE9D,MAAM,CAACwE,SAAU,CAAAX,QAAA,CACrCrC,YAAY,EAAI,IAAI,EAAMH,KAAK,CAAC6D,IAAI,EAAI,OAAQ,cAClD3E,IAAA,QAAKyE,OAAO,CAAEA,CAAA,GAAIpD,SAAS,CAAC,CAAE,CAAAkC,SAAS,CAAE9D,MAAM,CAACmF,WAAY,CAAAtB,QAAA,CAAC,aAAW,CAAK,CAAC,cAE9EtD,IAAA,CAAAI,SAAA,EAAAkD,QAAA,cACAtD,IAAA,QAAKuD,SAAS,CAAE9D,MAAM,CAACmF,WAAY,CAAAtB,QAAA,CAAC,aAAW,CAAK,CAAC,CACnD,CACD,CACW,CAAC,EACF,CAAC,CAEC,CAAC,CAED,CAAC,CACD,CAAC,EACD,CAAC,EAAA1C,qBAAA,CACLE,KAAK,CAAC+D,gBAAgB,UAAAjE,qBAAA,iBAAtBA,qBAAA,CAAwByD,GAAG,CAAE/C,IAAI,eAClCtB,IAAA,QAAKuD,SAAS,CAAI9D,MAAM,CAACqF,kBAAmB,CAAAxB,QAAA,cAC5CtD,IAAA,QAAKuD,SAAS,CAAI9D,MAAM,CAACsF,eAAgB,CAAApB,GAAG,IAAAC,MAAA,CAAOtC,IAAI,CAAG,CAAC,CAAC,CAAK,CAClE,CAAC,EAEE,CAAC,CAIX,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}